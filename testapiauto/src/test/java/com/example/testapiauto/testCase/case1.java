package com.example.testapiauto.testCase;


import com.example.testapiauto.modules.testCase.common.Assertion.AssertionImp.ResponseAssertionImp;
import com.example.testapiauto.modules.testCase.utils.AssertUtil;
import com.example.testapiauto.modules.testCase.utils.Cookie;
import com.example.testapiauto.modules.testCase.common.Assertion.AssertionImp.ResponseAssertionImp;
import com.example.testapiauto.modules.testCase.utils.HttpClient;
import io.qameta.allure.Epic;
import io.qameta.allure.Feature;
import io.qameta.allure.Stories;
import io.qameta.allure.Story;
import org.apache.log4j.LogManager;
import org.apache.log4j.Logger;
import org.junit.jupiter.api.DisplayName;
import org.testng.Assert;
import org.testng.annotations.Test;

import javax.annotation.Resource;
import java.util.HashMap;
import java.util.Map;
import java.util.Random;
import com.example.testapiauto.app.dao.caseDao;
import com.example.testapiauto.app.serviceImp.caseServiceImp;

/*
 *@program:testapiauto
 *@author: 假斯文
 *@Time: 2021/3/18  16:51
 */
@Epic("故障台")
@Feature("故障台接口")
public class case1 {


//    @Resource
//    ResponseAssertionImp  responseAssertionImp;
    private static final Logger logger = LogManager.getLogger(case1.class);
    ResponseAssertionImp responseAssertionImp = new ResponseAssertionImp();
    @Resource
    caseServiceImp caseServiceImp;
    /*** 
    * @author 假斯文
    * @date 2021/3/26 14:36
    * @param 
    * @return 
    ***/


//    @Test(description = "test")
//    public void  case_one(){
//
//        String expect = "0";
//        String url = "http://yunxiao.multi.com/fault/api-fault/interface/product/list?pageNum=0&pageSize=9999";
//        Map<String,Object> headers = new HashMap<>();
//        headers.put("Cookie","_csrf=HpdifO0T7P7YYp9WT1AtMKJB; XSRF-TOKEN=eeb86369-af3b-4e27-b84d-508fd9b5ebb3; l_u_i=5BFADC7053F713869A5A17125613819901F5B242D20876ECEB8BD854FFE28EA9; cna=nT6EGOcmECACASp4Sa9vSsAM; isg=BJWVwqU8WchpGH00bQGSrqzrpJFPkkmkkqfHexc6DYxUbrdg3eGedbYvOHJY7mFc; ak_user_timezone=Asia/Shanghai; ak_user_locale=zh_CN; ak_region_id=3396a8e5-13ed-4d57-97dc-2417fa444a50; JSESSIONID=8020169BA784840AB2177D742AF7A7D0; SESSION=6524e142-5d77-4449-9a61-65ac52bd41f3; internal_username=94A12728DE9015741CA72793DCFFA578; a_l=yunxiao; a_d=multi.com; a_u=66E5EADDE27582337C7D71D29D556D4FC81D9428685CEB400E07838163E03DBE1ADB88CF987B766193C202D7153F5C21A0868A1B43A7A4F021A29B2159A8D93CD8767750548DEC197581A8BAA54DAA2B394B915579F54D33BFC027D7402622D9857F351CD0237DEA7098733996E085DB9E60B34B2C5EF18C8DDED6B0C0E65FB7919C0A49E9B64B81462370ACDD85346264027B7493195106839879E001672739B061C346DA02761AA71AD913181EE4F2AF0F1EC33793477C63594C330D35775629E8F6E0BC90A9B978D9FD170DA73DA998E88422584965DA72B5DD4636A2F905A420DAD4343862A0622F36F630454F3576BDD574F01BBC6BD2E8F751617B09B4D99C9A8D64195D0648DF3A91046FF81142CCD02B722663C962E7CBDCF528EFFA4EE9BAF10A7BF5ADB726ECB28C36C911F1148859350BA5BA5B01F920B9D75C24023065EF36837AC95AC60983E4A2EAC4F79B39EBE8313CB049DB96D9C8AB54DA0EBD9DC4797E7389F4214FCD634E4C098FEE56B452F94689FE0DA6411959006CFBF6A4133B202AFB12E5CEF618E0D66558807C4D4F7D9912AD15AE379871FD781279400A13FA881727959ABDC297DD069317C556A1525E8C121E1B9CF613AF66; a_u_t=C0D321E6584CCDB2F9A36CDEA98657B0; aone_user_uuid=0e4b65bd-1719-43b0-81a5-c007d41ef235; a_u_k=8BA59D8C6F232A9132A125FAB1C2814AE6F5B9E50F16179876A8F426A0A956FE789DCA3C7070CA2132130079570FED3D362AE33FDE0F5B5B9B1061D981E46143B1E970478BBAFE502FB83BB18B2074B186292E50D9EDADDE443FD62681B3C314B6F282FAC0E695D550CB274F40C319B2090410D3A8F7DFD402C38C1D42857B243F33F0B43D3FD5CD8A3C11FFF570273C1FC14C0D5AF830F1AA162D66F07F97E04F67940FAD34CBD41EFE8A9A4F8E92CAB4F5DC250371E924CE91422CFC82BFB070DB858C65494B720BA6114A6DADE446F5DAF10BEFD01BDFE6CF422C30A6CDE88AE4B1EA6969492EA35010708D56FF89761D7CE9B7D5B63174D1A9B725D90E3B42057759ABC61305FFC428DC80D5FA8C4B706F720F095D68334CA15FC8A782C95118AD367A7D005120418C161DDD50B94FD8B5E285324B86ED9D415F9308C49D9A38F9CDD68CFBE525F94D25C7D6A9F1; aone=eyJ1c2VyIjp7Imd1aWQiOiJpbnRlcm5hbF8wMDAwMDIiLCJpZCI6MiwiaW50ZXJuYWxVc2VyIjp7InVzZXJJZCI6MiwidXNlcm5hbWUiOiJpdGVzdEFsaSJ9LCJpc1ZhbGlkIjp0cnVlLCJtYWluQWNjb3VudFR5cGUiOiJpbnRlcm5hbCIsInVzZXJQcm9maWxlRFRPIjp7ImF2YXRhciI6Imh0dHA6Ly95dW54aWFvLm11bHRpLmNvbS9wb3J0YWwvaW1hZ2VzL2RlZmF1bHRfYXZhdGFyLmpwZyIsImNyZWF0ZWRBdCI6MTYxMDYxNDQ1MTAwMCwiZGF0YVNvdXJjZSI6Im1hbnVhbCIsImVtYWlsIjoiMTIzIiwiZW5nbGlzaE5hbWUiOiIiLCJtb2JpbGUiOiIxMjM0NTY3ODkwMSIsIm5hbWUiOiJpdGVzdEFsaSIsIm5pY2tOYW1lIjoiaXRlc3RBbGkiLCJ1c2VySWQiOjIsInVzZXJPdXRlcklkIjoiaXRlc3RBbGkifSwidXVpZCI6IjBlNGI2NWJkLTE3MTktNDNiMC04MWE1LWMwMDdkNDFlZjIzNSIsInN0YWZmSWQiOiJpbnRlcm5hbF8wMDAwMDIiLCJ3b3JraWQiOiJpbnRlcm5hbF8wMDAwMDIiLCJuaWNrbmFtZSI6Iml0ZXN0QWxpIiwicmVhbG5hbWUiOiJpdGVzdEFsaSJ9LCJha1JlZ2lvbiI6IjMzOTZhOGU1LTEzZWQtNGQ1Ny05N2RjLTI0MTdmYTQ0NGE1MCIsImFrUmVnaW9uSWQiOjF9; aone.sig=RoUgf61OfW2RImR7tVKQWDpp48A; mctoken=461e4a3f-489e-48ec-9152-881836c80fd2; SERVERID=10.103.4.36:10080");
//        String response = HttpClient.doGet_header(url,headers);
//        String msg = AssertUtil.asert(response,"$.code");
//        logger.info("assert_response:"+ msg);
//        Assert.assertEquals(expect,msg);
////        System.out.println(response);
//    }


//    @Test(description = "11")

    @Story("查询接口-查询故障页")
    @Test(description = "查询全部")
    public void case_two(){
//        Map<String,String> expect = new HashMap<>();
//        expect.put("$.code","0");
        String expect = "0";
        String url = "http://yunxiao.multi.com/fault/api-fault/interface/product/list?pageNum=0&pageSize=9999";
        logger.info("请求路径："+url);
        Map<String,Object> headers = new HashMap<>();
        headers.put("Cookie","_csrf=HpdifO0T7P7YYp9WT1AtMKJB; XSRF-TOKEN=eeb86369-af3b-4e27-b84d-508fd9b5ebb3; l_u_i=5BFADC7053F713869A5A17125613819901F5B242D20876ECEB8BD854FFE28EA9; cna=nT6EGOcmECACASp4Sa9vSsAM; isg=BJWVwqU8WchpGH00bQGSrqzrpJFPkkmkkqfHexc6DYxUbrdg3eGedbYvOHJY7mFc; ak_user_timezone=Asia/Shanghai; ak_user_locale=zh_CN; ak_region_id=3396a8e5-13ed-4d57-97dc-2417fa444a50; JSESSIONID=8020169BA784840AB2177D742AF7A7D0; SESSION=6524e142-5d77-4449-9a61-65ac52bd41f3; internal_username=94A12728DE9015741CA72793DCFFA578; a_l=yunxiao; a_d=multi.com; a_u=66E5EADDE27582337C7D71D29D556D4FC81D9428685CEB400E07838163E03DBE1ADB88CF987B766193C202D7153F5C21A0868A1B43A7A4F021A29B2159A8D93CD8767750548DEC197581A8BAA54DAA2B394B915579F54D33BFC027D7402622D9857F351CD0237DEA7098733996E085DB9E60B34B2C5EF18C8DDED6B0C0E65FB7919C0A49E9B64B81462370ACDD85346264027B7493195106839879E001672739B061C346DA02761AA71AD913181EE4F2AF0F1EC33793477C63594C330D35775629E8F6E0BC90A9B978D9FD170DA73DA998E88422584965DA72B5DD4636A2F905A420DAD4343862A0622F36F630454F3576BDD574F01BBC6BD2E8F751617B09B4D99C9A8D64195D0648DF3A91046FF81142CCD02B722663C962E7CBDCF528EFFA4EE9BAF10A7BF5ADB726ECB28C36C911F1148859350BA5BA5B01F920B9D75C24023065EF36837AC95AC60983E4A2EAC4F79B39EBE8313CB049DB96D9C8AB54DA0EBD9DC4797E7389F4214FCD634E4C098FEE56B452F94689FE0DA6411959006CFBF6A4133B202AFB12E5CEF618E0D66558807C4D4F7D9912AD15AE379871FD781279400A13FA881727959ABDC297DD069317C556A1525E8C121E1B9CF613AF66; a_u_t=C0D321E6584CCDB2F9A36CDEA98657B0; aone_user_uuid=0e4b65bd-1719-43b0-81a5-c007d41ef235; a_u_k=8BA59D8C6F232A9132A125FAB1C2814AE6F5B9E50F16179876A8F426A0A956FE789DCA3C7070CA2132130079570FED3D362AE33FDE0F5B5B9B1061D981E46143B1E970478BBAFE502FB83BB18B2074B186292E50D9EDADDE443FD62681B3C314B6F282FAC0E695D550CB274F40C319B2090410D3A8F7DFD402C38C1D42857B243F33F0B43D3FD5CD8A3C11FFF570273C1FC14C0D5AF830F1AA162D66F07F97E04F67940FAD34CBD41EFE8A9A4F8E92CAB4F5DC250371E924CE91422CFC82BFB070DB858C65494B720BA6114A6DADE446F5DAF10BEFD01BDFE6CF422C30A6CDE88AE4B1EA6969492EA35010708D56FF89761D7CE9B7D5B63174D1A9B725D90E3B42057759ABC61305FFC428DC80D5FA8C4B706F720F095D68334CA15FC8A782C95118AD367A7D005120418C161DDD50B94FD8B5E285324B86ED9D415F9308C49D9A38F9CDD68CFBE525F94D25C7D6A9F1; aone=eyJ1c2VyIjp7Imd1aWQiOiJpbnRlcm5hbF8wMDAwMDIiLCJpZCI6MiwiaW50ZXJuYWxVc2VyIjp7InVzZXJJZCI6MiwidXNlcm5hbWUiOiJpdGVzdEFsaSJ9LCJpc1ZhbGlkIjp0cnVlLCJtYWluQWNjb3VudFR5cGUiOiJpbnRlcm5hbCIsInVzZXJQcm9maWxlRFRPIjp7ImF2YXRhciI6Imh0dHA6Ly95dW54aWFvLm11bHRpLmNvbS9wb3J0YWwvaW1hZ2VzL2RlZmF1bHRfYXZhdGFyLmpwZyIsImNyZWF0ZWRBdCI6MTYxMDYxNDQ1MTAwMCwiZGF0YVNvdXJjZSI6Im1hbnVhbCIsImVtYWlsIjoiMTIzIiwiZW5nbGlzaE5hbWUiOiIiLCJtb2JpbGUiOiIxMjM0NTY3ODkwMSIsIm5hbWUiOiJpdGVzdEFsaSIsIm5pY2tOYW1lIjoiaXRlc3RBbGkiLCJ1c2VySWQiOjIsInVzZXJPdXRlcklkIjoiaXRlc3RBbGkifSwidXVpZCI6IjBlNGI2NWJkLTE3MTktNDNiMC04MWE1LWMwMDdkNDFlZjIzNSIsInN0YWZmSWQiOiJpbnRlcm5hbF8wMDAwMDIiLCJ3b3JraWQiOiJpbnRlcm5hbF8wMDAwMDIiLCJuaWNrbmFtZSI6Iml0ZXN0QWxpIiwicmVhbG5hbWUiOiJpdGVzdEFsaSJ9LCJha1JlZ2lvbiI6IjMzOTZhOGU1LTEzZWQtNGQ1Ny05N2RjLTI0MTdmYTQ0NGE1MCIsImFrUmVnaW9uSWQiOjF9; aone.sig=RoUgf61OfW2RImR7tVKQWDpp48A; mctoken=461e4a3f-489e-48ec-9152-881836c80fd2; SERVERID=10.103.4.36:10080");
        logger.info("请求头："+headers);
        String response = HttpClient.doGet_header(url,headers);
        logger.info("响应结果："+response);
        String msg = AssertUtil.asert(response,"$.code");
        Assert.assertEquals(msg,expect);
        logger.info("断言结果："+responseAssertionImp.assertEqualsString(msg,expect));
        logger.info(caseServiceImp);

    }
}    

